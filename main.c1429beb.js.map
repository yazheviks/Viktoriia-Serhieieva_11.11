{"version":3,"sources":["scripts/main.js"],"names":["data","filteredMovies","url","gallery","document","querySelector","favoriteMovies","list","createElement","select","startApplication","fetch","then","response","json","map","movie","selected","sessionStorage","id","setSelect","renderMovies","renderFavoriteMovies","genres","Set","basicOption","textContent","append","addEventListener","event","has","target","value","filter","includes","innerHTML","genre","add","forEach","option","movies","movieCard","classList","img","name","year","closest","remove","addFavoriteMovie","createModal","favoriteMovie","listItem","matches","modal","content","join","description","director","starring","star","body"],"mappings":"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","file":"main.c1429beb.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable max-len */\n/* eslint-disable no-undef */\n/* eslint-disable indent */\n'use strict';\n\nconst url = 'https://my-json-server.typicode.com/moviedb-tech/movies/list';\nlet data;\nlet filteredMovies;\nconst gallery = document.querySelector('.gallery__container');\nconst favoriteMovies = document.querySelector('.favorite-movies');\nconst list = document.createElement('ul');\nconst select = document.querySelector('.gallery__filter');\n\nstartApplication();\n\nfunction startApplication() {\n  fetch(url)\n  .then(response => response.json())\n  .then(json => {\n    data = json.map(movie => ({\n      ...movie,\n      selected: !!sessionStorage[movie.id],\n    }));\n    filteredMovies = data;\n\n    setSelect();\n    renderMovies(filteredMovies);\n    renderFavoriteMovies();\n  });\n}\n\nfunction setSelect() {\n  const genres = new Set();\n  const basicOption = document.createElement('option');\n\n  basicOption.textContent = 'all genres';\n  select.append(basicOption);\n\n  select.addEventListener('change', (event) => {\n    if (!genres.has(event.target.value)) {\n      filteredMovies = data;\n    } else {\n      filteredMovies = data.filter(movie => (\n        movie.genres.includes(event.target.value))\n      );\n    }\n\n    gallery.innerHTML = ``;\n    renderMovies(filteredMovies);\n  });\n\n  data.map(movie => {\n    movie.genres.map(genre => {\n      genres.add(genre);\n    });\n  });\n\n  genres.forEach(genre => {\n    const option = document.createElement('option');\n\n    option.textContent = genre;\n    select.append(option);\n  });\n}\n\nfunction renderMovies(movies) {\n  movies.forEach(movie => {\n    const movieCard = document.createElement('div');\n\n    movieCard.classList.add('movie-card');\n\n    movieCard.innerHTML = `\n      <img\n        src=\"${movie.img}\"\n        class=\"movie-card__img\"\n        alt=\"movie\"\n      >\n      <svg\n        viewBox=\"0 -10 511.98685 511\" width=\"511pt\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"movie-card__svg ${movie.selected ? 'checked' : ''}\"\n      >\n        <path d=\"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0\"/>\n      </svg>\n      <p class=\"movie-card__title\">\n        ${movie.name}\n      </p>\n      <p class=\"movie-card__year\">\n        ${movie.year}\n      </p>\n    `;\n\n    movieCard.addEventListener('click', (event) => {\n      if (event.target.closest('.movie-card__svg')) {\n        if (movie.selected) {\n          event.target.closest('.movie-card__svg').classList.remove('checked');\n          movie.selected = false;\n          sessionStorage[movie.id] = '';\n          renderFavoriteMovies(data);\n        } else {\n          movie.selected = true;\n          event.target.closest('.movie-card__svg').classList.add('checked');\n          addFavoriteMovie(movie);\n          sessionStorage[movie.id] = true;\n        }\n\n        return;\n      }\n\n      createModal(movie);\n    });\n\n    gallery.append(movieCard);\n  });\n}\n\nfunction renderFavoriteMovies() {\n  list.classList.add('favorite-movies__list');\n  favoriteMovies.append(list);\n  list.innerHTML = ``;\n\n  data.forEach(movie => {\n    if (!movie.selected) {\n      return;\n    }\n\n    addFavoriteMovie(movie);\n  });\n}\n\nfunction addFavoriteMovie(favoriteMovie) {\n  const listItem = document.createElement('li');\n\n  listItem.classList.add('favorite-movies__item');\n\n  listItem.innerHTML = `\n    ${favoriteMovie.name}\n    <button class=\"page__close-btn\">\n      X\n    </button>\n  `;\n\n  listItem.addEventListener('click', (event) => {\n    if (event.target.matches('.page__close-btn')) {\n      favoriteMovie.selected = false;\n      sessionStorage[favoriteMovie.id] = '';\n      gallery.innerHTML = ``;\n      renderMovies(filteredMovies);\n      event.target.closest('.favorite-movies__item').remove();\n\n      return;\n    }\n    createModal(favoriteMovie);\n  });\n\n  list.append(listItem);\n}\n\nfunction createModal(movie) {\n  const modal = document.createElement('div');\n  const content = document.createElement('div');\n\n  modal.classList.add('modal');\n  content.classList.add('modal__content');\n\n  content.innerHTML = `\n    <div class=\"modal__wrapper\">\n      <img src=\"${movie.img}\" class=\"modal__img\">\n      <div class=\"movie__year\">Year: ${movie.year}</div>\n      <div class=\"modal__genres\"> Genres:\n        ${movie.genres.map(genre => (\n          `<div class=\"modal__genre\">${genre}</div>`\n        )).join(' ')}\n      </div>\n    </div>\n\n    <div class=\"modal__wrapper\">\n      <h1 class=\"modal__title\">${movie.name}</h1>\n      <p class=\"modal__description\">${movie.description}</p>\n      <p class=\"modal__director\">Director: ${movie.director}</p>\n      <p class=\"modal__starring\">Starring:\n          ${movie.starring.map(star => (\n            star\n          )).join(', ')}\n      </p>\n    </div>\n\n    <button class=\"page__close-btn modal__btn\">X</button>\n  `;\n\n  content.addEventListener('click', (event) => {\n    if (!event.target.matches('.page__close-btn')) {\n      return;\n    }\n\n    modal.remove();\n  });\n\n  modal.append(content);\n  document.body.append(modal);\n}\n"]}